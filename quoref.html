<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

        <title>Smart Question Answering</title>
        <link href="main.css" rel="stylesheet" />
        <script src="main.js"></script>
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </head>

    <body>
        <form name='mturk_form' method='post' id='mturk_form' action='https://www.mturk.com/mturk/externalSubmit'>
            <input type='hidden' value='' name='assignmentId' id='assignmentId' />
            <div id="root" class="container">
                <div class="row mb-4">
                    <div class="col">
                        <h1 class="text-center">Questions that require tracking entity references</h1>
                        <div class="card">
                            <a class="card-header" data-toggle="collapse" href="#collapseInstructions" aria-expanded="true" aria-controls="collapseInstructions">
                                <h3> Instructions (click to collapse) </h3>
                            </a>
                            <div id="collapseInstructions" class="collapse show">
                                <div class="card-body">
                                    <p class="card-text">
			                                  <b>This is a pilot annotation task, and we are still trying to assess its feasibility. Once we get an understanding of
			                                      how difficult this task is, we will update the pay rate accordingly, and will add more HITs. Your feedback will greatly help us in this process.
			                                      So please remember to use the feedback box at the bottom of this page to let us know what you think!</b>
			                              </p>
                                    <p class="card-text">
                                        In this task, you will look at paragraphs that contain several phrases that are references to names of
                                        people, places, or things. You will notice that multiple phrases often refer to the same person, place, or thing.
                                        For example, in the first sentence from sample paragraph below, the names <i>Jack Dawkins</i> and <i>the Artful Dodger</i>
                                        refer to the same person. Your job is to assess the skills of an AI system at identifying the connection between
                                        phrases that refer to the same entity. To do so, you will ask it questions that involve applying these skills, and
                                        <b>find questions that the AI system cannot answer</b>. Here are some kinds of questions you can ask for the
                                        paragraph below.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class="col">
                        <div class="card">
                            <a class="card-header" data-toggle="collapse" href="#collapseExamples" aria-expanded="true" aria-controls="collapseExamples">
                                <h3> Examples (click to collapse) </h3>
                            </a>
                            <div id="collapseExamples" class="collapse show">
                                <div class="card-body">
                                    <h5 class="card-text text-center">
                                        Move your mouse over a question to
                                        highlight the parts of the passage that
                                        are relevant to the question.
                                    </h5>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col">
                                                <div class="card sticky-top">
                                                    <div class="card-header">
                                                        <h2>Passage</h2>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="passage-sample card-text">
                                                            Naring London, <span class="span9b"><span class="span1b">Oliver</span></span> encounters <span class="span9c"><span class="span34b">Jack
                                                            Dawkins</span></span>, <span class="span9c">a pickpocket</span> more commonly known by the nickname
                                                            <span class="span9c"><span class="span2b">the "Artful Dodger"</span></span>, and <span class="span9a"><span class="span9c"><span class="span2a">his</span></span>
                                                                sidekick</span>, <span class="span9a">a boy of a humorous nature</span> named
                                                            <span class="span3c">Charley Bates</span>, but <span class="span9b">Oliver</span>'s innocent and trusting nature fails to see
                                                            any dishonesty in <span class="span3a">their</span> actions.
                                                            <span class="span9c"><span class="span4a">The Dodger</span></span> provides <span class="span9b">Oliver</span>
                                                            with a free meal and tells <span class="span9b">him</span> of <span class="span9d">a gentleman</span> in London who will "give <span class="span9b">him</span> lodgings for
                                                            nothing, and never ask for change". Grateful for the unexpected assistance, <span class="span9b">Oliver</span> follows
                                                            <span class="span9c">the Dodger</span> to <span class="span6b">the "<span class="span9d">old gentleman</span>'s" residence</span>. In this way
                                                            <span class="span9b">Oliver</span> unwittingly falls in with <span class="span9d">an infamous Jewish criminal</span> known as <span class="span9d">Fagin</span>, <span class="span9d">the gentleman</span>
                                                            of whom <span class="span9c">the Artful Dodger</span> spoke. Ensnared, <span class="span9b">Oliver</span> lives with <span class="span9d">Fagin</span> and <span class="span9d">his</span> gang of juvenile
                                                            pickpockets in <span class="span6a">their lair</span> at Saffron Hill for some time, unaware
                                                            of their criminal occupations. <span class="span9b"><span class="span1a">He</span></span> believes they make wallets and handkerchiefs.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col" id="exampleQuestions">
                                                <h5>
                                                    Questions about pronouns (she, her, him, his, their etc.) that refer to people, places, or things
                                                </h5>
                                                <div class="card mb-2" onmouseover="highlight_q1();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: Who believes Fagin's gang make wallets and handkerchiefs? <br/>
                                                            Answer: <b>Oliver</b><br/>
                                                            Notes: Question evaluates the understanding that the pronoun highlighted in blue refers to name highlighted in green.
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="card mb-2" onmouseover="highlight_q2();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: What is the alias of the person whose sidekick had a humorous nature? <br/>
                                                            Answer: <b>the "Artful Dodger"</b><br/>
                                                            Notes: The pronoun highlighted in blue refers to a person with multiple names. But since the question explicitly asks
                                                            for the alias, the answer is unambiguous.
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="card mb-2" onmouseover="highlight_q3();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: What are the names of the people whose dishonesty Oliver failed to see? <br/>
                                                            Answer: <b>Jack Dawkins</b>; <b>Charley Bates</b><br/>
                                                            Notes: Pronoun (in blue) refers to two different spans (in green).
                                                        </p>
                                                    </div>
                                                </div>
                                                <hr>
                                                <h5>
                                                    Questions about other references to people, places, or things
                                                </h5>
                                                <div class="card mb-2" onmouseover="highlight_q4();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: What is the Dodger's real name? <br/>
                                                            Answer: <b>Jack Dawkins</b> <br/>
                                                            Notes: Question evaluates the understanding that "The Dodger" and "Jack Dawkins" are the same person.
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="card mb-2" onmouseover="highlight_q5();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: What is the real name of the person who provided Oliver with a free meal? <br/>
                                                            Answer: <b>Jack Dawkins</b><br/>
                                                            Notes: This question is about the same connection as the last one, but this one uses information surrounding the alias instead of the alias itself.
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="card mb-2" onmouseover="highlight_q6();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: Which place served as Fagin and his gang's lair? <br/>
                                                            Answer: <b>the "old gentleman's" residence</b><br/>
                                                            Notes: Question evaluates the understanding that the highlighted phrases are references to the same place. The answer is the phrase in green.
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="card mb-2" onmouseover="highlight_q7();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: Where is the old gentleman's residence? <br />
                                                            Answer: <b>Saffron Hill</b> <br />
                                                            Notes: This is also about the same connection as the last one, but it asks for information near the phrase in green, and thus the answer here is different.<br />
                                                        </p>
                                                    </div>
                                                </div>
                                                <hr>
                                                <h5>
                                                    Questions like the ones above, except they do not have answers in the paragraph
                                                </h5>
                                                <div class="card mb-2">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question: What is Charley Bates' nickname? <br/>
                                                            Answer: <b>NO ANSWER</b> <br/>
                                                            Notes: This question would have had an answer if it were about "Fagin", or "Jack Dawkins", and it would have been in the previous category then.
                                                        </p>
                                                    </div>
                                                </div>
                                                <hr>
                                                <h5>
                                                    Questions involving counting the number of times a person, place, or a thing is mentioned
                                                </h5>
                                                <div class="card mb-2" onmouseover="highlight_q9();" onmouseout="reset_higlight();">
                                                    <div class="card-body">
                                                        <p class="card-text">
                                                            Question:  What is the name of the person who is mentioned the least number of times? <br/>
                                                            Answer: <b>Charley Bates</b> <br/>
                                                            Notes: Charley Bates (mentions highlighted in green) is mentioned fewer times than Oliver (in yellow), Jack Dawkins (in pink), or Fagin (in orange).
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <h2>Let's start writing some questions now!</h2>
                        <h4>Please keep in mind the following:</h4>
                        <ol>
			                      <li> For each of your questions, if an answer exists, it should be one or more phrases in the paragraph.
				                        If not, please select “NO ANSWER”. </li>
			                      <li> The answer for each question, if one exists in the paragraph, should be unambiguous. Please avoid
				                        questions that can have more than one answers. </li>
			                      <li> There is an AI system running in the background, what will try to answer your question as
				                        soon as you are done typing. It is reasonably smart, and can answer relatively simple questions. But we are interested
		    		                    in those questions that it is not smart enough to answer. If the system's answer is correct, please ask it another question. After you
		    		                    find a question that it cannot answer correctly, please also select the correct answer.
			                      </li>
			                      <li> Once you add a question, it appears below the answer area. If you are unhappy with a question you added, you can edit it by clicking on it. </li>
			                      <li> You have <b>3 passages</b> to pick from, and over these three passages, you must create <b>at least 12 questions</b> to submit the HIT.
                    	      </li>
                    	      <li> You can go back and forth between the passages. Some passages are easier to generate questions from than
				                        others, so if you have a hard time, move to a different passage.
                    	      </li>
                    	      <li> If the "ADD QUESTION" or "READY TO SUBMIT HIT" buttons are not active, hover your mouse on them to know the reason.
                    	      </li>
                        </ol>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>
                            Questions Written: <span id="numQuestionsWritten"></span>
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="container">
                            <div class="row">
                                <div class="col">
                                    <div class="card sticky-top">
                                        <div class="card-header">
                                            <h2>
                                                Passage <span id="passageNum"></span>
                                            </h2>
                                        </div>
                                        <div class="card-body">
                                            <div class="card-text">
                                                <div class="passage">
                                                    <div class="passage-0">
                                                        <strong>Loading passages...</strong>
                                                        <div class="spinner-border" role="status">
                                                            <span class="sr-only"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <h2>Type a question based on the passage below</h2>
                                    <div class="question">
                                        <input type="text" class="form-control" id="input-question" placeholder="Write a question here!" onkeyup="initialize_answer();">
                                    </div>
                                    <div class="row mt-4">
                                        <div class="col">
                                            <h4>Your Answer</h4>
                                            <table id="ans_table">
                                                <tr id="span_row">
                                                    <td>
                                                        <input type="radio" name="answer" id="span" value='span' onchange="return add_span(this);">Highlight the answer(s)
                                                    </td>
                                                </tr>
                                                <tr id="no_answer_row">
                                                    <td>
                                                        <input type="radio" name="answer" id="no_answer" value='no_answer' onchange="run_validations_no_answer();">No answer
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="col">
                                            <h4>AI predicted the answer below <br />(wait for answer to appear below)</h4>
                                            <div class="ai_answer" align="center">
                                                <textarea id="ai-answer" type="text" readonly>
                                                </textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="wrapper-outer">
                                        <div class="horizontal-scroll-wrapper">
                                        </div>
                                        <br />
                                        <div id="bottomrow">
                                            <button id="next_question" type="button" class="btn-submit" onclick="create_question();">
                                                Add Question
                                            </button>
                                            <div id="error_panel">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br/>
                <div class="bottom_panel">
                    <button id="ready_submit" type="button" class="btn" onclick="final_submit()" onmouseover="check_question_count();">
                        Ready to Submit HIT
                    </button>

                    <button id="prev_passage" type="button" class="btn" onclick="populate_passage('previous');">
                        Previous Passage
                    </button>

                    <button id="next_passage" type="button" class="btn" onclick="populate_passage('next');">
                        Next Passage
                    </button>

                </div>
            </div>
            <br />
            <br />
            <div id="comment">
                <textarea type="text" name="feedback" id="feedback" rows="10" cols="20" placeholder="Please leave your feedback here."></textarea>
            </div>

            <div id="generated_answers">
            </div>

            <div id="submission" style="display:none">
                <h2>Thank you for helping our research!</h2>
            </div>
            <br />

            <div id="submission_container">
                <!--<input type='submit' class="btn" id='submitButton' disabled value='Submit HIT' style="display:none;margin-left:45%" />-->
            </div>

        </form>
        <script language='Javascript'>
         turkSetAssignmentID();
        </script>
    </body>
</html>
